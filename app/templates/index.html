<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SDX Tester</title>
</head>
<body>
    <div>
        <form action="/submit" method="post">
            <select name="surveys names" id="survey_names">
                <li>surveys</li>
                {% for x in surveys %}
                    <option value= "{{ x }}">{{ x['survey_id'] }}.{{ x['collection']['instrument_id'] }}</option>
                {% endfor %}
            </select>
            <br>
            <br>
            <br>
            <textarea id="post-data" name="post-data" rows="33" cols="60">

            </textarea>
            <br>
            <button type="button" onclick="prettyPrint()">Pretty Print</button>
            <input id="submit" type="submit" value="Submit" style="margin-top: 20px">

            <script>
                document.getElementById("survey_names").addEventListener('change', function(event) {
                    document.getElementById("post-data").value = event.target.value
                });
            </script>
            <script>
                function prettyPrint() {
                    var ugly = document.getElementById('post-data').value;
                    var obj = JSON.parse(ugly);
                    var pretty = JSON.stringify(obj, undefined, 4);
                    document.getElementById('post-data').value = pretty;
                }
            </script>
        </form>
    </div>
</body>
</html>